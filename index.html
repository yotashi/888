<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>數列處理</title>
</head>
<body>
    <h1>數列處理</h1>
    <p>內建數列：270, 608, 99, 226, 225, 928, 273, 858, 221, 479, 243, 212, 384, 233, 569, 92, 572, 410, 700, 651, 596, 237, 954, 252, 671, 495, 928, 465, 430, 730, 137, 235, 154, 714, 114, 506, 375, 139, 77</p>
    <form id="inputForm">
        <label for="numbers">請輸入最多39個數字（用空白鍵分隔）:</label><br>
        <input type="text" id="numbers" name="numbers" pattern="^(\d+\s){0,13}\d+$" title="請輸入最多39個數字，用空白鍵分隔" required><br><br>
        <input type="submit" value="提交">
    </form>
    <h2>輸出結果：</h2>
    <div id="output"></div>

    <script>
    document.getElementById('inputForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const sequence = [270, 608, 99, 226, 225, 928, 273 ,858,221, 479, 243, 212, 384, 233,569,92,572,410,700,651,596,237,954,252,671,495,928,465,430,730,137,235,154,714,114,506,375,139,77];
        const inputNumbers = document.getElementById('numbers').value.trim().split(/\s+/).map(Number);

        if (inputNumbers.length > 39) {
            alert("最多輸入39個數字！");
            return;
        }

        // 隨機選取起始位置，但要確保剩餘數列的長度足以容納輸入數字的個數
        const maxStartIndex = sequence.length - inputNumbers.length;
        const startIndex = Math.floor(Math.random() * (maxStartIndex + 1));

        let output = "<table border='1'><tr><th>亂數</th><th>輸入數字(包數）</th><th>餘數</th><th>餘數+1</th></tr>";

        for (let i = 0; i < inputNumbers.length; i++) {
            const seqNum = sequence[startIndex + i];
            const num = inputNumbers[i];

            if (num === 1) {
                output += `<tr><td>${seqNum}</td><td>${num}</td><td>${num}</td><td>僅有一包</td></tr>`;
            } else {
                const remainder = seqNum % num;

                if (remainder === 0) {
                    output += `<tr><td>${seqNum}</td><td>${num}</td><td>${seqNum}</td><td>1</td></tr>`;
                } else {
                    const remainderPlusOne = remainder + 1;
                    output += `<tr><td>${seqNum}</td><td>${num}</td><td>${remainder}</td><td>${remainderPlusOne}</td></tr>`;
                }
            }
        }

        output += "</table>";
        document.getElementById('output').innerHTML = output;
    });
    </script>
</body>
</html>
